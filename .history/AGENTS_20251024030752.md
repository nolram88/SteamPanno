# Repository Guidelines

## Project Structure & Module Organization
- `src/SteamPanno` — Godot 4.5 (C#/.NET 8) project: game logic, scenes (`scenes/`), assets (`assets/`), shaders, and Steamworks native libs under `addons/steam/<platform>/`.
- `src/SteamPanno.Tests` — xUnit test project using Shouldly and NSubstitute; references the main project.
- `build/` — export scripts and Steam Pipe manifests (`*.vdf`); exports land in `dist/` (git‑ignored).
- `doc/` — documentation and images.

## Build, Test, and Development Commands
- Prereqs: .NET 8 SDK, Godot 4.5 Mono (for editor/export).
- Restore/Build: `dotnet build src/SteamPanno.sln -c Debug`
- Run tests: `dotnet test src/SteamPanno.sln -c Release --collect:"XPlat Code Coverage"`
- Open in editor: launch Godot 4.5 Mono and open `src/SteamPanno`.
- Export builds: Windows `build/windows-x64.bat`, Linux `build/linux-x64.bat`, macOS `bash build/macos-uni.sh`.
- Steam upload (example): `steamcmd +login <user> +run_app_build build/windows-x64.vdf +quit`.

## Coding Style & Naming Conventions
- C# with tabs for indentation (match existing files); UTF‑8; one public type per file.
- Naming: PascalCase for types/methods; camelCase for locals/parameters; `*Test.cs` for tests.
- Prefer clear, small methods; guard clauses; avoid side effects in extensions.
- Optional formatting: `dotnet format` before commits (if installed).

## Testing Guidelines
- Frameworks: xUnit + Shouldly assertions + NSubstitute mocks; coverage via Coverlet collector.
- Patterns: descriptive test names (e.g., `ShouldParseResolution`), `[Fact]/[Theory]` with inline data.
- Scope: pure logic is ideal; avoid external I/O and editor‑dependent APIs in unit tests.
- Run: `dotnet test` from repo root; CI should fail on red tests.

## Commit & Pull Request Guidelines
- Commits: short, imperative subject (“add”, “fix”, “refactor”); include rationale in body when needed; link issues (`#123`).
- PRs: clear description, steps to test, screenshots for UI, linked issues, and notes on platform/export impact; update docs when changing build/test behavior.

## Agent Notes (Optional)
- MCP (HTTP) quick call: `archibot-tools-py --base-url "http://127.0.0.1:9123" --tool rag_query --args '{"query":"list open issues"}'`.
- Spawn subagents: `codex --yolo exec "run tests and summarize failures"` (keep prompts quoted; long jobs allowed).
